<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-black: #000000;
            --dark-black: #111111;
            --card-black: #222222;
            --champagne: #D4AF37;
            --light-champagne: #F0D89C;
            --text-primary: #FFFFFF;
            --text-secondary: #CCCCCC;
            --text-tertiary: #888888;
            --danger: #ff4444;
            --success: #00C851;
            --warning: #ffbb33;
            --info: #33b5e5;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: var(--primary-black); color: var(--text-primary); min-height: 100vh; }
        
        /* Layout */
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        
        /* Header */
        .admin-header { display: flex; justify-content: space-between; align-items: center; padding: 20px 0; border-bottom: 1px solid var(--champagne); margin-bottom: 30px; }
        .admin-logo { display: flex; align-items: center; gap: 10px; font-size: 24px; font-weight: 700; }
        .admin-logo i { color: var(--champagne); }
        .admin-logo span { color: var(--champagne); }
        .admin-actions { display: flex; gap: 15px; align-items: center; }
        
        /* Buttons */
        .btn { padding: 10px 20px; border-radius: 8px; border: none; font-weight: 600; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 8px; }
        .btn-primary { background: var(--champagne); color: var(--primary-black); }
        .btn-primary:hover { background: var(--light-champagne); transform: translateY(-2px); }
        .btn-secondary { background: transparent; color: var(--champagne); border: 2px solid var(--champagne); }
        .btn-secondary:hover { background: rgba(212, 175, 55, 0.1); }
        .btn-danger { background: var(--danger); color: white; }
        .btn-success { background: var(--success); color: white; }
        
        /* Login */
        #loginSection { max-width: 400px; margin: 100px auto; padding: 40px; background: var(--card-black); border-radius: 16px; border: 1px solid var(--champagne); text-align: center; }
        .login-title { font-size: 28px; margin-bottom: 10px; color: var(--champagne); }
        .login-subtitle { color: var(--text-tertiary); margin-bottom: 30px; }
        
        /* Forms */
        .form-group { margin-bottom: 20px; text-align: left; }
        .form-label { display: block; margin-bottom: 8px; color: var(--text-secondary); font-weight: 500; }
        .form-input { width: 100%; padding: 12px 16px; background: var(--dark-black); border: 1px solid var(--text-tertiary); border-radius: 8px; color: var(--text-primary); font-family: 'Inter', sans-serif; font-size: 16px; }
        .form-input:focus { outline: none; border-color: var(--champagne); }
        
        /* Tabs */
        .tabs { display: flex; gap: 10px; margin-bottom: 30px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 10px; }
        .tab-btn { padding: 10px 20px; background: transparent; border: none; color: var(--text-tertiary); cursor: pointer; border-radius: 6px; display: flex; align-items: center; gap: 8px; }
        .tab-btn.active { background: rgba(212, 175, 55, 0.1); color: var(--champagne); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        /* Grid */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-bottom: 40px; }
        .grid-item { background: var(--card-black); border-radius: 12px; padding: 20px; border: 1px solid rgba(212, 175, 55, 0.2); transition: all 0.3s; cursor: pointer; }
        .grid-item:hover { transform: translateY(-5px); border-color: var(--champagne); box-shadow: 0 10px 20px rgba(212, 175, 55, 0.1); }
        .grid-item-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .grid-item-title { font-size: 18px; font-weight: 600; color: var(--champagne); }
        .grid-item-actions { display: flex; gap: 10px; }
        .action-btn { width: 36px; height: 36px; border-radius: 6px; border: none; background: rgba(255, 255, 255, 0.1); color: var(--text-primary); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s; }
        .action-btn:hover { background: var(--champagne); color: var(--primary-black); }
        .grid-item-image { width: 100%; height: 120px; border-radius: 8px; overflow: hidden; margin-bottom: 15px; }
        .grid-item-image img { width: 100%; height: 100%; object-fit: cover; }
        
        /* Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 10000; align-items: center; justify-content: center; padding: 20px; }
        .modal-content { background: var(--card-black); border-radius: 16px; border: 1px solid var(--champagne); max-width: 600px; width: 90%; max-height: 90vh; overflow: hidden; display: flex; flex-direction: column; }
        .modal-header { padding: 20px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); position: relative; }
        .modal-title { color: var(--champagne); }
        .modal-close { position: absolute; top: 15px; right: 15px; width: 40px; height: 40px; background: rgba(0,0,0,0.5); border: 1px solid var(--champagne); border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .modal-body { padding: 20px; overflow-y: auto; flex: 1; }
        .modal-footer { padding: 20px; border-top: 1px solid rgba(212, 175, 55, 0.3); display: flex; gap: 15px; }
        
        /* Status */
        .status-bar { position: fixed; bottom: 20px; right: 20px; background: var(--card-black); padding: 15px 20px; border-radius: 12px; border: 1px solid var(--champagne); display: none; align-items: center; gap: 10px; z-index: 1000; max-width: 300px; }
        .status-bar.show { display: flex; animation: slideIn 0.3s ease; }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        
        /* Loading */
        .loading-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: none; align-items: center; justify-content: center; z-index: 9999; }
        .loading-overlay.show { display: flex; }
        .loading-spinner { width: 50px; height: 50px; border: 3px solid var(--text-tertiary); border-top-color: var(--champagne); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        /* Responsive */
        @media (max-width: 768px) {
            .grid { grid-template-columns: 1fr; }
            .tabs { flex-wrap: wrap; }
            .tab-btn { flex: 1; min-width: 120px; justify-content: center; }
        }
    </style>
    <!-- Thêm Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-analytics-compat.js"></script>
</head>
<body>
    <!-- Login Section -->
    <div id="loginSection" style="display: none;">
        <div style="max-width: 400px; margin: 100px auto; padding: 40px; background: var(--card-black); border-radius: 16px; border: 1px solid var(--champagne); text-align: center;">
            <h1 class="login-title" style="font-size: 28px; margin-bottom: 10px; color: var(--champagne);">
                <i class="fas fa-crown"></i> Admin
            </h1>
            <p class="login-subtitle" style="color: var(--text-tertiary); margin-bottom: 30px;">Quản lý nội dung website</p>
            
            <div class="form-group" style="margin-bottom: 20px; text-align: left;">
                <label class="form-label" style="display: block; margin-bottom: 8px; color: var(--text-secondary); font-weight: 500;">Mã Admin</label>
                <input type="password" id="adminToken" class="form-input" placeholder="Mặc định: luxurymove2024" 
                       style="width: 100%; padding: 12px 16px; background: var(--dark-black); border: 1px solid var(--text-tertiary); border-radius: 8px; color: var(--text-primary); font-size: 16px;">
                <small style="color: var(--text-tertiary); font-size: 12px;">
                    Trạng thái: <span id="savedTokenStatus">Chưa lưu</span>
                </small>
            </div>

            <div style="display: flex; align-items: center; gap: 8px; margin: 20px 0;">
                <input type="checkbox" id="rememberMe" style="width: 18px; height: 18px;">
                <label for="rememberMe" style="color: var(--text-secondary); cursor: pointer; font-size: 14px;">
                    Ghi nhớ thiết bị này
                </label>
            </div>
            
            <button onclick="handleLogin()" class="login-btn" 
                    style="width: 100%; padding: 12px; background: var(--champagne); color: var(--primary-black); border: none; border-radius: 8px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;">
                <i class="fas fa-sign-in-alt"></i> Đăng nhập
            </button>
            
            <div id="loginError" class="error-message" style="display: none; color: var(--danger); font-size: 13px; margin-top: 10px; padding: 8px 12px; background: rgba(255,68,68,0.1); border-radius: 6px; align-items: center; gap: 8px;"></div>
        </div>
    </div>

    <!-- Auto Login Messages -->
    <div id="autoLoginLoading" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: none; align-items: center; justify-content: center; z-index: 10000;">
        <div style="text-align: center; color: var(--text-primary);">
            <div class="loading-spinner" style="width: 40px; height: 40px; border: 3px solid var(--champagne); border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 15px;"></div>
            <p>Đang kiểm tra đăng nhập...</p>
        </div>
    </div>

    <div id="autoLoginSuccess" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: none; align-items: center; justify-content: center; z-index: 10000;">
        <div style="text-align: center; color: var(--text-primary); background: var(--card-black); padding: 40px; border-radius: 16px; border: 1px solid var(--success);">
            <div class="success-icon" style="color: var(--success); font-size: 40px; margin-bottom: 15px;">
                <i class="fas fa-check-circle"></i>
            </div>
            <h3 style="color: var(--success); margin-bottom: 10px;">Đăng nhập thành công!</h3>
            <p>Đang chuyển hướng...</p>
        </div>
    </div>

    <!-- Editor Section -->
    <div id="editorSection" class="container" style="display: none;">
        <!-- Header -->
        <div class="admin-header">
            <div class="admin-logo">
                <i class="fas fa-crown"></i>
                Admin
            </div>
            <div class="admin-actions">
                <button class="btn btn-secondary" onclick="showModal('tokenModal')">
                    <i class="fas fa-key"></i> Token
                </button>
               
                <button class="btn btn-secondary" onclick="logoutAdmin()">
                    <i class="fas fa-sign-out-alt"></i> Đăng xuất
                </button>
            </div>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('services')">
                <i class="fas fa-car"></i> Dịch vụ
            </button>
            <button class="tab-btn" onclick="showTab('experiences')">
                <i class="fas fa-users"></i> Trải nghiệm
            </button>
            <button class="tab-btn" onclick="showTab('gallery')">
                <i class="fas fa-images"></i> Gallery
            </button>
            <button class="tab-btn" onclick="showTab('blog')">
                <i class="fas fa-newspaper"></i> Blog
            </button>
        </div>

        <!-- Tab Contents -->
        <div id="servicesTab" class="tab-content active">
            <div class="admin-header">
                <h2 class="modal-title">Quản lý Dịch vụ</h2>
                <button class="btn btn-primary" onclick="openEditor('service')">
                    <i class="fas fa-plus"></i> Thêm dịch vụ
                </button>
            </div>
            <div id="servicesList" class="grid"></div>
        </div>

        <div id="experiencesTab" class="tab-content">
            <div class="admin-header">
                <h2 class="modal-title">Quản lý Trải nghiệm</h2>
                <button class="btn btn-primary" onclick="openEditor('experience')">
                    <i class="fas fa-plus"></i> Thêm trải nghiệm
                </button>
            </div>
            <div id="experiencesList" class="grid"></div>
        </div>

        <div id="galleryTab" class="tab-content">
            <div class="admin-header">
                <h2 class="modal-title">Quản lý Gallery</h2>
                <button class="btn btn-primary" onclick="openEditor('gallery')">
                    <i class="fas fa-plus"></i> Thêm ảnh
                </button>
            </div>
            <div id="galleryList" class="grid"></div>
        </div>

        <div id="blogTab" class="tab-content">
            <div class="admin-header">
                <h2 class="modal-title">Quản lý Blog</h2>
                <button class="btn btn-primary" onclick="openEditor('blog')">
                    <i class="fas fa-plus"></i> Thêm bài viết
                </button>
            </div>
            <div id="blogList" class="grid"></div>
        </div>
    </div>

    <!-- Universal Editor Modal -->
    <div id="editorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="editorModalTitle">Thêm mới</h2>
                <button class="modal-close" onclick="closeEditor()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="editorModalBody">
                <!-- Form sẽ được tạo động bằng JS -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="saveItem()" style="flex: 1;">
                    <i class="fas fa-save"></i> Lưu
                </button>
                <button class="btn btn-danger" onclick="deleteItem()" id="deleteItemBtn" style="display: none;">
                    <i class="fas fa-trash"></i> Xóa
                </button>
            </div>
        </div>
    </div>

    <!-- Token Modal -->
    <div id="tokenModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-key"></i> Quản lý Token</h2>
                <button class="modal-close" onclick="closeModal('tokenModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Token hiện tại</label>
                    <input type="text" id="currentTokenDisplay" class="form-input" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Token mới</label>
                    <input type="password" id="newToken" class="form-input">
                </div>
                <div class="form-group">
                    <label class="form-label">Xác nhận token</label>
                    <input type="password" id="confirmToken" class="form-input">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="updateToken()" style="flex: 1;">
                    <i class="fas fa-save"></i> Cập nhật
                </button>
                <button class="btn btn-secondary" onclick="closeModal('tokenModal')">
                    <i class="fas fa-times"></i> Đóng
                </button>
            </div>
        </div>
    </div>

    <!-- GitHub Modal -->
    <div id="githubModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title"><i class="fab fa-github"></i> Cấu hình GitHub</h2>
                <button class="modal-close" onclick="closeModal('githubModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Username</label>
                    <input type="text" id="githubUsername" class="form-input" value="Datkep92">
                </div>
                <div class="form-group">
                    <label class="form-label">Repository</label>
                    <input type="text" id="githubRepo" class="form-input" value="hoangtung">
                </div>
                <div class="form-group">
                    <label class="form-label">Branch</label>
                    <input type="text" id="githubBranch" class="form-input" value="main">
                </div>
                <div class="form-group">
                    <label class="form-label">GitHub Token</label>
                    <input type="password" id="githubTokenModal" class="form-input" placeholder="ghp_xxxxxxxxxxxx">
                </div>
                <div id="githubStatus"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-success" onclick="testGitHubConnection()">
                    <i class="fas fa-plug"></i> Kiểm tra
                </button>
                <button class="btn btn-primary" onclick="saveGitHubConfig()" style="flex: 1;">
                    <i class="fas fa-save"></i> Lưu
                </button>
                <button class="btn btn-secondary" onclick="closeModal('githubModal')">
                    <i class="fas fa-times"></i> Đóng
                </button>
            </div>
        </div>
    </div>

    <!-- Status Bar -->
    <div class="status-bar" id="statusBar">
        <i class="fas fa-check-circle" id="statusIcon"></i>
        <span id="statusMessage"></span>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>
    <script src="js/gallery.js"></script>
<script src="js/admin-pricing.js"></script>
    <script src="js/admin.js"></script>
</body>
</html>